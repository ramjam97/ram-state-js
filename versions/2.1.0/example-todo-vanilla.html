<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>TODO</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .cursor-pointer {
            cursor: pointer;
        }
        .completed {
            text-decoration: line-through;
        }
    </style>
</head>

<body class="container my-4">
    <h4 class="text-center mb-3">TODO</h4>

    <!-- Input -->
    <input id="taskInput" type="text" class="form-control mb-2" placeholder="Enter task">

    <!-- Controls -->
    <div class="d-flex justify-content-between align-items-center mb-2">
        <span id="count" class="fw-bold">Count: 0/0</span>
        <select id="filter" class="form-select w-auto">
            <option value="all">All</option>
            <option value="active">Active</option>
            <option value="completed">Completed</option>
        </select>
    </div>

    <!-- Task list -->
    <ul id="taskList" class="list-group"></ul>

    <script>
        const taskInput = document.getElementById("taskInput");
        const taskList = document.getElementById("taskList");
        const filter = document.getElementById("filter");
        const countEl = document.getElementById("count");

        let tasks = [];
        let id = 1;

        function renderTasks() {
            taskList.innerHTML = "";
            let filtered = tasks;

            if (filter.value === "active") {
                filtered = tasks.filter(t => !t.completed);
            } else if (filter.value === "completed") {
                filtered = tasks.filter(t => t.completed);
            }
            taskList.innerHTML = filtered
                .map(item => {
                    return `<li class="list-group-item d-flex justify-content-between">
                        <span class="cursor-pointer ${item.completed ? 'completed' : ''}" onclick="toggleTask(${item.id})">
                            ${item.id}.  ${item.text}
                        </span> 
                        <button class="btn-close" onclick="removeTask(${item.id})"></button>
                    </li>`;
                }).join('');

            const completedCount = tasks.filter(t => t.completed).length;
            countEl.textContent = `Count: ${completedCount}/${tasks.length}`;
        }

        function toggleTask(taskId) {
            tasks = tasks.map(t => t.id === taskId ? { ...t, completed: !t.completed } : t);
            renderTasks();
        }

        function removeTask(taskId) {
            tasks = tasks.filter(t => t.id !== taskId);
            renderTasks();
        }

        taskInput.addEventListener("keypress", e => {
            if (e.key === "Enter" && taskInput.value.trim() !== "") {
                tasks.push({ id: id++, text: taskInput.value.trim(), completed: false });
                taskInput.value = "";
                renderTasks();
            }
        });

        filter.addEventListener("change", renderTasks);

        renderTasks();
    </script>
</body>

</html>