/*!
 * RamStateJs v2.6.0
 * Description: A vanilla JavaScript state management library inspired by Reactâ€™s useState, useEffect, and useMemo â€“ but without any framework. It helps you manage stateful data and DOM bindings easily with reactive watchers and side effects.
 * Author: Ram Jam
 * GitHub: https://github.com/ramjam97/ram-state-js
 * Build Date: 2025-09-23 23:12:51 (Asia/Manila)
 */
function RamState(e={}){const n=new Set,t=function(){let e=new Set,n=!1;function t(){n=!0,e.forEach(e=>e()),e.clear(),n=!1}return function(a){e.add(a),n||Promise.resolve().then(t)}}();const a=(e,n)=>{if(e===n)return!0;if(typeof e!=typeof n)return!1;if(Array.isArray(e)&&Array.isArray(n))return e.length===n.length&&e.every((e,t)=>a(e,n[t]));if(e&&n&&"object"==typeof e){const t=Object.keys(e),l=Object.keys(n);return t.length===l.length&&t.every(t=>a(e[t],n[t]))}return!1},l=(e,n)=>{try{const t=n?e(n):e();return"function"==typeof t?t:null}catch(e){return console.error("RamState callback error:",e),null}},c=e=>{try{"function"==typeof e&&e()}catch(e){console.error("RamState cleanup error:",e)}},o=(e=null)=>e instanceof HTMLElement?[e]:"string"==typeof e?Array.from(document.querySelectorAll(e)):[];return(e.debug??1)&&console.log("%cRamState","color:cyan","v2.6.0","initialized ðŸš€"),{useState:function(e,t=null){let o=e;const s={onSet:[],onChange:[]},i=document.querySelectorAll(t);i.forEach(e=>{f(e,o),e.addEventListener("input",()=>{const n=r(e);h.set(n)}),e.addEventListener("change",()=>{const n=r(e);h.set(n)})});const d=e=>({dom:i,value:o,hasChange:e}),u=()=>({dom:i,value:o});function r(e){return e instanceof HTMLInputElement?"checkbox"===e.type?e.checked:e.value:e instanceof HTMLSelectElement?e.multiple?[...e.selectedOptions].map(e=>e.value):e.value:e instanceof HTMLTextAreaElement?e.value:null}function f(e,n){if(e instanceof HTMLInputElement&&"checkbox"===e.type){const t=Boolean(n);return void(e.checked!==t&&(e.checked=t))}if(e instanceof HTMLSelectElement&&e.multiple&&Array.isArray(n)){const t=new Set(n.map(String));return void Array.from(e.options).forEach(e=>{const n=t.has(e.value);e.selected!==n&&(e.selected=n)})}const t=n??"";"value"in e&&e.value!==t&&(e.value=t),e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e.textContent!==t&&(e.textContent=t)}const h={dom:i,get value(){return o},set(e){"function"==typeof e&&(e=e(o));const n=!a(o,e);return o=e,i.forEach(e=>f(e,o)),s.onSet.forEach(e=>{c(e.cleanup),e.cleanup=l(e.cb,d(n))}),n&&s.onChange.forEach(e=>{c(e.cleanup),e.cleanup=l(e.cb,u())}),o},watch(e){"function"==typeof e?s.onSet.push({cb:e,cleanup:l(e,d(!1))}):console.warn("watch callback must be a function")},watchEffect(e,n=!1){if("function"!=typeof e)return void console.warn("watchEffect callback must be a function");const t={cb:e,cleanup:null};n&&(t.cleanup=l(e,u())),s.onChange.push(t)}};return n.add(h),h},useButton:function(e,t={}){const s={state:{disabled:t?.state?.disabled??!1,loading:t?.state?.loading??!1,display:t?.state?.display??!0},disabled:{class:t?.disabled?.class??"disabled"},loading:{html:t?.loading?.html??"",icon:t?.loading?.icon??"",class:t?.loading?.class??"loading"},shown:{class:t?.shown?.class??"show",displayType:t?.shown?.displayType??"block"},hidden:{class:t?.hidden?.class??"hidden",displayType:t?.hidden?.displayType??"none"}},i=[...o(e)].map(e=>("function"==typeof s.loading.html&&(s.loading.html=s.loading.html(e.innerHTML)),{el:e,default:{html:e.innerHTML},loading:{html:s.loading.html||e.innerHTML,icon:s.loading.icon,class:s.loading.class},disabled:{class:s.disabled.class},shown:{class:s.shown.class,displayType:s.shown.displayType},hidden:{class:s.hidden.class,displayType:s.hidden.displayType}})),d=i.map(e=>e.el);let u={disabled:s.state.disabled,loading:s.state.loading,display:s.state.display};const r={onSet:[],onChange:[]},f=e=>({dom:d,state:u,hasChange:e}),h=()=>({dom:d,state:u});function p(e){const n=!a(u,e);var t;return u=e,t=u,i.forEach(e=>{const{el:n}=e,a=e.default,l=e.loading,c=e.disabled,o=e.shown,s=e.hidden;n.style.setProperty("display",t.display?o.displayType:s.displayType,"important"),n.disabled=t.disabled||t.loading,n.classList.toggle(l.class,t.loading),n.classList.toggle(c.class,t.disabled),n.classList.toggle(o.class,t.display),n.classList.toggle(s.class,!t.display),n.innerHTML=(t.loading?l.html:a.html)+(t.loading?l.icon:"")}),r.onSet.forEach(e=>{c(e.cleanup),e.cleanup=l(e.cb,f(n))}),n&&r.onChange.forEach(e=>{c(e.cleanup),e.cleanup=l(e.cb,h())}),u}const y={dom:d,get value(){return u},disabled:(e=!0)=>p({...u,disabled:e}),loading:(e=!0)=>p({...u,loading:e,disabled:e}),show:(e=!0)=>p({...u,display:e}),hide:(e=!0)=>p({...u,display:!e}),watch(e){"function"==typeof e?r.onSet.push({cb:e,cleanup:l(e,f(!1))}):console.warn("watch callback must be a function")},watchEffect(e,n=!1){if("function"!=typeof e)return void console.warn("watchEffect callback must be a function");const t={cb:e,cleanup:null};n&&(t.cleanup=l(e,h())),r.onChange.push(t)}};return n.add(y),y},useDisplay:function(e,t=null,s={}){let i=Boolean(e),d=[];const u={shown:{class:s?.shown?.class??"show",displayType:s?.shown?.displayType??"block"},hidden:{class:s?.hidden?.class??"hidden",displayType:s?.hidden?.displayType??"none"}},r={onSet:[],onChange:[]},f=e=>({dom:d,value:i,hasChange:e}),h=()=>({dom:d,value:i}),p=()=>{d=o(t),d.forEach(e=>{e.style.setProperty("display",i?u.shown.displayType:u.hidden.displayType,"important"),e.classList.toggle(u.shown.class,i),e.classList.toggle(u.hidden.class,!i)})},y=e=>{const n=!a(i,e);return i=e,p(),r.onSet.forEach(e=>{c(e.cleanup),e.cleanup=l(e.cb,f(n))}),n&&r.onChange.forEach(e=>{c(e.cleanup),e.cleanup=l(e.cb,h())}),i},g={dom:d,get value(){return i},show:(e=!0)=>y(Boolean(e)),hide:(e=!0)=>y(Boolean(!e)),toggle:e=>y(Boolean(e??!i)),watch(e){"function"==typeof e?r.onSet.push({cb:e,cleanup:l(e,f(!1))}):console.warn("watch callback must be a function")},watchEffect(e,n=!1){if("function"!=typeof e)return void console.warn("watchEffect callback must be a function");const t={cb:e,cleanup:null};n&&(t.cleanup=l(e,h())),r.onChange.push(t)}};return n.add(g),p(),g},useEffect:function(e,a=null){if("function"!=typeof e)return void console.warn("useEffect callback must be a function");let o;function s(){c(o),o=l(e)}null==a?n.forEach(e=>{"watchEffect"in e?e.watchEffect(()=>t(s)):"watch"in e&&e.watch(()=>t(s))}):Array.isArray(a)&&a.forEach(e=>{"watchEffect"in e?e.watchEffect(()=>t(s)):"watch"in e&&e.watch(()=>t(s))}),s()},useMemo:function(e,n=[]){let a,o=[];const s=()=>({value:a});function i(){return a=e(),o.forEach(e=>{c(e.cleanup),e.cleanup=l(e.cb,s())}),a}return n.forEach(e=>e?.watchEffect(()=>t(i))),i(),{get value(){return a},watch(e){"function"==typeof e?o.push({cb:e,cleanup:l(e,s())}):console.warn("watchEffect callback must be a function")}}}}}