/*!
 * RamStateJs v2.6.0
 * Description: A vanilla JavaScript state management library inspired by Reactâ€™s useState, useEffect, and useMemo â€“ but without any framework. It helps you manage stateful data and DOM bindings easily with reactive watchers and side effects.
 * Author: Ram Jam
 * GitHub: https://github.com/ramjam97/ram-state-js
 * Build Date: 2025-09-24 14:22:32 (Asia/Manila)
 */
function RamState(e={}){const n=new Set,t=function(){let e=new Set,n=!1;function t(){n=!0,e.forEach(e=>e()),e.clear(),n=!1}return function(a){e.add(a),n||Promise.resolve().then(t)}}();const a=(e,n)=>{if(e===n)return!0;if(typeof e!=typeof n)return!1;if(Array.isArray(e)&&Array.isArray(n))return e.length===n.length&&e.every((e,t)=>a(e,n[t]));if(e&&n&&"object"==typeof e){const t=Object.keys(e),c=Object.keys(n);return t.length===c.length&&t.every(t=>a(e[t],n[t]))}return!1},c=(e,n)=>{try{const t=n?e(n):e();return"function"==typeof t?t:null}catch(e){return console.error("RamState callback error:",e),null}},l=e=>{try{"function"==typeof e&&e()}catch(e){console.error("RamState cleanup error:",e)}},o=(e=null)=>e instanceof HTMLElement?[e]:"string"==typeof e?Array.from(document.querySelectorAll(e)):[];return(e.debug??1)&&console.log("%cRamState","color:cyan","v2.6.0","initialized ðŸš€"),{useState:function(e,t=null){let o=e;const s={onSet:[],onChange:[]},i=document.querySelectorAll(t);i.forEach(e=>{f(e,o),e.addEventListener("input",()=>{const n=d(e);h.set(n)}),e.addEventListener("change",()=>{const n=d(e);h.set(n)})});const u=e=>({dom:i,value:o,hasChange:e}),r=()=>({dom:i,value:o});function d(e){return e instanceof HTMLInputElement?"checkbox"===e.type?e.checked:e.value:e instanceof HTMLSelectElement?e.multiple?[...e.selectedOptions].map(e=>e.value):e.value:e instanceof HTMLTextAreaElement?e.value:null}function f(e,n){if(e instanceof HTMLInputElement&&"checkbox"===e.type){const t=Boolean(n);return void(e.checked!==t&&(e.checked=t))}if(e instanceof HTMLSelectElement&&e.multiple&&Array.isArray(n)){const t=new Set(n.map(String));return void Array.from(e.options).forEach(e=>{const n=t.has(e.value);e.selected!==n&&(e.selected=n)})}const t=n??"";"value"in e&&e.value!==t&&(e.value=t),e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e.textContent!==t&&(e.textContent=t)}const h={dom:i,get value(){return o},set(e){"function"==typeof e&&(e=e(o));const n=!a(o,e);return o=e,i.forEach(e=>f(e,o)),s.onSet.forEach(e=>{l(e.cleanup),e.cleanup=c(e.cb,u(n))}),n&&s.onChange.forEach(e=>{l(e.cleanup),e.cleanup=c(e.cb,r())}),o},watch(e){"function"==typeof e?s.onSet.push({cb:e,cleanup:c(e,u(!1))}):console.warn("watch callback must be a function")},watchEffect(e,n=!1){if("function"!=typeof e)return void console.warn("watchEffect callback must be a function");const t={cb:e,cleanup:null};n&&(t.cleanup=c(e,r())),s.onChange.push(t)}};return n.add(h),h},useButton:function(e,t={}){const s={state:{disabled:t?.state?.disabled??!1,loading:t?.state?.loading??!1,display:t?.state?.display??!0},disabled:{class:t?.disabled?.class??"disabled"},loading:{html:t?.loading?.html??"",icon:t?.loading?.icon??"",class:t?.loading?.class??"loading"},shown:{class:t?.shown?.class??"show",displayType:t?.shown?.displayType??"inline-block"},hidden:{class:t?.hidden?.class??"hidden",displayType:t?.hidden?.displayType??"none"}},i=[...o(e)].map(e=>("function"==typeof s.loading.html&&(s.loading.html=s.loading.html(e.innerHTML)),{el:e,default:{html:e.innerHTML},loading:{html:s.loading.html||e.innerHTML,icon:s.loading.icon,class:s.loading.class},disabled:{class:s.disabled.class},shown:{class:s.shown.class},hidden:{class:s.hidden.class}})),u=i.map(e=>e.el);let r={disabled:s.state.disabled,loading:s.state.loading,display:s.state.display};const d={onSet:[],onChange:[]},f=e=>({dom:u,state:r,hasChange:e}),h=()=>({dom:u,state:r});function p(e){const n=!a(r,e);var t;return r=e,t=r,i.forEach(e=>{const{el:n}=e,a=e.default,c=e.loading,l=e.disabled,o=e.shown,s=e.hidden;t.display?n.style.removeProperty("display"):n.style.setProperty("display","none","important"),n.disabled=t.disabled||t.loading,n.classList.toggle(c.class,t.loading),n.classList.toggle(l.class,t.disabled),n.classList.toggle(o.class,t.display),n.classList.toggle(s.class,!t.display),n.innerHTML=(t.loading?c.html:a.html)+(t.loading?c.icon:"")}),d.onSet.forEach(e=>{l(e.cleanup),e.cleanup=c(e.cb,f(n))}),n&&d.onChange.forEach(e=>{l(e.cleanup),e.cleanup=c(e.cb,h())}),r}const y={dom:u,get value(){return r},disabled:(e=!0)=>p({...r,disabled:e}),loading:(e=!0)=>p({...r,loading:e,disabled:e}),show:(e=!0)=>p({...r,display:e}),hide:(e=!0)=>p({...r,display:!e}),watch(e){"function"==typeof e?d.onSet.push({cb:e,cleanup:c(e,f(!1))}):console.warn("watch callback must be a function")},watchEffect(e,n=!1){if("function"!=typeof e)return void console.warn("watchEffect callback must be a function");const t={cb:e,cleanup:null};n&&(t.cleanup=c(e,h())),d.onChange.push(t)}};return n.add(y),y},useDisplay:function(e,t=null,s={}){let i=Boolean(e),u=[];const r={shown:{class:s?.shown?.class??"show"},hidden:{class:s?.hidden?.class??"hidden"}},d={onSet:[],onChange:[]},f=e=>({dom:u,value:i,hasChange:e}),h=()=>({dom:u,value:i}),p=()=>{u=o(t),u.forEach(e=>{i?e.style.removeProperty("display"):e.style.setProperty("display","none","important"),e.classList.toggle(r.shown.class,i),e.classList.toggle(r.hidden.class,!i)})},y=e=>{const n=!a(i,e);return i=e,p(),d.onSet.forEach(e=>{l(e.cleanup),e.cleanup=c(e.cb,f(n))}),n&&d.onChange.forEach(e=>{l(e.cleanup),e.cleanup=c(e.cb,h())}),i},g={dom:u,get value(){return i},show:(e=!0)=>y(Boolean(e)),hide:(e=!0)=>y(Boolean(!e)),watch(e){"function"==typeof e?d.onSet.push({cb:e,cleanup:c(e,f(!1))}):console.warn("watch callback must be a function")},watchEffect(e,n=!1){if("function"!=typeof e)return void console.warn("watchEffect callback must be a function");const t={cb:e,cleanup:null};n&&(t.cleanup=c(e,h())),d.onChange.push(t)}};return n.add(g),p(),g},useEffect:function(e,a=null){if("function"!=typeof e)return void console.warn("useEffect callback must be a function");let o;function s(){l(o),o=c(e)}null==a?n.forEach(e=>{"watchEffect"in e?e.watchEffect(()=>t(s)):"watch"in e&&e.watch(()=>t(s))}):Array.isArray(a)&&a.forEach(e=>{"watchEffect"in e?e.watchEffect(()=>t(s)):"watch"in e&&e.watch(()=>t(s))}),s()},useMemo:function(e,n=[]){let a,o=[];const s=()=>({value:a});function i(){return a=e(),o.forEach(e=>{l(e.cleanup),e.cleanup=c(e.cb,s())}),a}return n.forEach(e=>e?.watchEffect(()=>t(i))),i(),{get value(){return a},watch(e){"function"==typeof e?o.push({cb:e,cleanup:c(e,s())}):console.warn("watchEffect callback must be a function")}}}}}