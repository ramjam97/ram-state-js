/*!
 * RamStateJs JavaScript Library v1.0.0
 * https://github.com/ramjam97/ram-state-js
 * Date: 2024-07-26T16:46:19.944Z
 */ class RamState{#a;#b;#c;#d;constructor(e){this.#d=this.#e(e),this.#a=this.#e(e),this.#b=[],this.#c=0}set(e){let t=this.#a,i="function"==typeof e?e(this.#e(t)):e;this.#f(t,i)||(this.#c+=1,this.#a=this.#e(i),this.#g(i,t,this.#c))}get(){return this.#e(this.#a)}get value(){return this.#e(this.#a)}watch(e,t=!1){if("function"==typeof e){if(this.#b.push(e),t)try{e(this.#a,this.#a,this.#c)}catch(i){console.error("Error in initial side effect callback:",i)}}else console.warn("Callback provided to watch is not a function")}reset(e=null){let t=this.#a;e=null===e?this.#e(this.#d):this.#e(e),this.#f(t,e)||(this.#c+=1),this.#a=e,this.#g(e,t,this.#c)}#g(e,t,i){this.#b.forEach(s=>{try{s(e,t,i)}catch(n){console.error("Error in side effect callback:",n)}})}#f(s,n){if(s instanceof Set&&n instanceof Set)return s.size===n.size&&[...s].every(e=>n.has(e));if(s instanceof Map&&n instanceof Map){if(s.size!==n.size)return!1;for(let[r,a]of s)if(!n.has(r)||!this.#f(a,n.get(r)))return!1;return!0}return JSON.stringify(s)===JSON.stringify(n)}#e(h,f=new WeakMap){if(Object(h)!==h)return h;if(h instanceof Date)return new Date(h);if(h instanceof RegExp)return RegExp(h);if(h instanceof Set)return new Set([...h].map(e=>this.#e(e,f)));if(h instanceof Map)return new Map([...h].map(([e,t])=>[this.#e(e,f),this.#e(t,f)]));if(f.has(h))return f.get(h);let o=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return f.set(h,o),Object.assign(o,...Object.keys(h).map(e=>({[e]:this.#e(h[e],f)})))}}