/*!
 * RamStateJs JavaScript Library v1.0.0
 * https://github.com/ramjam97/ram-state-js
 * Date: 2024-07-26T16:46:19.944Z
 */ class RamState{#a;#b;#c;constructor(e){this.#a=this.#d(e),this.#b=[],this.#c=0}set(e){let t=this.#a,i="function"==typeof e?e(this.#d(t)):e;this.#e(t,i)||(this.#c+=1,this.#a=this.#d(i),this.#f(i,t,this.#c))}get(){return this.#d(this.#a)}get value(){return this.#d(this.#a)}watch(e,t=!1){if("function"==typeof e){if(this.#b.push(e),t)try{e(this.#a,this.#a,this.#c)}catch(i){console.error("Error in initial side effect callback:",i)}}else console.warn("Callback provided to watch is not a function")}#f(e,t,i){this.#b.forEach(s=>{try{s(e,t,i)}catch(n){console.error("Error in side effect callback:",n)}})}#e(s,n){if(s instanceof Set&&n instanceof Set)return s.size===n.size&&[...s].every(e=>n.has(e));if(s instanceof Map&&n instanceof Map){if(s.size!==n.size)return!1;for(let[r,a]of s)if(!n.has(r)||!this.#e(a,n.get(r)))return!1;return!0}return JSON.stringify(s)===JSON.stringify(n)}#d(f,o=new WeakMap){if(Object(f)!==f)return f;if(f instanceof Date)return new Date(f);if(f instanceof RegExp)return RegExp(f);if(f instanceof Set)return new Set([...f].map(e=>this.#d(e,o)));if(f instanceof Map)return new Map([...f].map(([e,t])=>[this.#d(e,o),this.#d(t,o)]));if(o.has(f))return o.get(f);let h=Array.isArray(f)?[]:Object.create(Object.getPrototypeOf(f));return o.set(f,h),Object.assign(h,...Object.keys(f).map(e=>({[e]:this.#d(f[e],o)})))}}