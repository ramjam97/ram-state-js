/*!
 * RamState JavaScript Library v1.0.0
 * https://github.com/ramjam97/ram-state-js
 * Date: 2024-07-26T16:46:19.944Z
 */ class RamState{#a;#b;#c;constructor(e){this.#a=this.#d(e),this.#b=[],this.#c=0}set(e){let t=this.#a;"function"==typeof e&&(e=e(this.#d(t))),this.#e(t,e)||(this.#c+=1,this.#a=this.#d(e),this.#f(e,t,this.#c))}get(){return this.#d(this.#a)}get value(){return this.#d(this.#a)}watch(e,t=!1){if("function"==typeof e){if(this.#b.push(e),t)try{e(this.#a,this.#a,this.#c)}catch(i){console.error("Error in initial side effect callback:",i)}}else console.warn("Callback provided to watch is not a function")}#f(e,t,i){this.#b.forEach(s=>{try{s(e,t,i)}catch(r){console.error("Error in side effect callback:",r)}})}#e(s,r){return JSON.stringify(s)===JSON.stringify(r)}#d(n,a=new WeakMap){if(Object(n)!==n)return n;if(n instanceof Date)return new Date(n);if(n instanceof RegExp)return RegExp(n);if(n instanceof Set)return new Set([...n].map(e=>this.#d(e,a)));if(n instanceof Map)return new Map([...n].map(([e,t])=>[this.#d(e,a),this.#d(t,a)]));if(a.has(n))return a.get(n);let o=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));return a.set(n,o),Object.assign(o,...Object.keys(n).map(e=>({[e]:this.#d(n[e],a)})))}}