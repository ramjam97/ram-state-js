/*!
 * RamState JavaScript Library v1.0.0
 * https://github.com/ramjam97/ram-state-js
 * Date: 2024-07-26T16:46:19.944Z
 */ class RamState{#a;#b;#c;constructor(t){this.#a=t,this.#b=[],this.#c=0}set(t){this.#c+=1;let e=this.#a;"function"==typeof t&&(t=t(this.#d(e))),this.#e(e,t)||(this.#a=this.#d(t),this.#f(t,e,this.#c))}get(){return this.#d(this.#a)}get value(){return this.#d(this.#a)}watch(t,e=!1){if("function"==typeof t){if(this.#b.push(t),e)try{t(this.#a,this.#a,this.#c)}catch(i){console.error("Error in initial side effect callback:",i)}}else console.warn("Callback provided to watch is not a function")}#f(t,e,i){this.#b.forEach(s=>{try{s(t,e,i)}catch(r){console.error("Error in side effect callback:",r)}})}#e(s,r){return JSON.stringify(s)===JSON.stringify(r)}#d(n,a=new WeakMap){if(Object(n)!==n)return n;if(n instanceof Date)return new Date(n);if(n instanceof RegExp)return RegExp(n);if(n instanceof Set)return new Set([...n].map(t=>this.#d(t,a)));if(n instanceof Map)return new Map([...n].map(([t,e])=>[this.#d(t,a),this.#d(e,a)]));if(a.has(n))return a.get(n);let f=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));return a.set(n,f),Object.assign(f,...Object.keys(n).map(t=>({[t]:this.#d(n[t],a)})))}}